{% extends "kontakti/base.html" %}

{% block title %}Kontakti sa pacijentima{% endblock %}

{% block content %}

<div class="container mt-3">
  <table class="table">
    <tr>
      <td>
        <h5>Pacijent</h5>
      </td>
      <td>{{ patient.first_name }} {{ patient.last_name }}</td>
    </tr>
    <tr>
      <td>
        <h5>Datum rođenja (starost)</h5>
      </td>
      <td>{{ patient.date_of_birth }} <strong>({{ patient.age|floatformat:"1" }})</strong> </td>
    </tr>
    <tr>
      <td>
        <h5>JMBG</h5>
      </td>
      <td>{{ patient.jmbg }}</td>
    </tr>
    <td>
      <h5>doctor</h5>
    </td>
    <td>{{ patient.doctor }}</td>
    </tr>
    <tr>
      <td>
        <h5>Dijagnoza</h5>
      </td>
      <td>{{ patient.diagnose }}</td>
    </tr>
    <tr>
      <td>
        <h5>Anestezija</h5>
      </td>
      <td>
        {% if patient.anestezija == True %}
        opšta
        {% else %}
        lokalna
        {% endif %}
      </td>
    </tr>
    <tr>
      <td>
        <h5>Grad</h5>
      </td>
      <td>{{ patient.city }}</td>
    </tr>
    <tr>
      <td>
        <h5>Država</h5>
      </td>
      <td>{{ patient.state }}</td>
    </tr>
    <tr>
      <td>
        <h5>Telefon br.</h5>
      </td>
      <td>{{ patient.phone }}</td>
    </tr>
    <tr>
      <td>
        <h5>Pol</h5>
      </td>
      <td> {% if patient.gender == True %}
        muški
        {% else %}
        ženski
        {% endif %}
      </td>
    </tr>
  </table>

  <p>
    <a class="btn btn-secondary" href="{% url 'edit_patient' patient.id %}">Izmeni</a>
    <a class="btn btn-secondary" href="{% url 'delete_patient' patient.id %}">Izbriši</a>
  </p>
  <hr>

  {% if contacts %}

  <h4>Kontakti: &NonBreakingSpace; <a class="btn btn-secondary" href="{% url 'add_contact' patient.id %}">Novi kontakt</a></h4>
  <table class="table table-striped table-bordered table-responsive-sm">
    <tr class="table-success">
      <th>Kontaktirao/la pacijenta</th>
      <th>Vreme kontakta</th>
      <th>Zakazano za</th>
      <th>Zabeleška</th>
    </tr>
    {% for contact in contacts %}
    <tr>
      <td>{{ contact.user.first_name }} {{ contact.user.last_name }}</td>
      <td>{{ contact.created_at }}</td>
      <td>{{ contact.reserved_for }}</td>
      <td>{{ contact.note }}</td>
    </tr>


    {% endfor %}
  </table>
  {% else %}
  <p>
    <a class="btn btn-secondary" href="{% url 'add_contact' patient.id %}">Novi kontakt</a>
  </p>
  {% endif %}

</div>
{% endblock %}
